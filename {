AIzaSyBbT6E0gbxKVG4LI-tnQ_4cZ8CndmJxoCE
import React, { useState } from 'react';
import { StyleSheet, View, TextInput, TouchableOpacity, Text } from 'react-native';
import MapView, { Marker } from 'react-native-maps';
import { useTheme } from '@/src/contexts/ThemeContext'; // Assuming ThemeContext is in a separate file
import { styles } from '@/src/styles/MapStyles';

export default function MapSearchScreen() {
    const { theme } = useTheme();
    const [searchQuery, setSearchQuery] = useState('Mladost');
    const [marker, setMarker] = useState({
        latitude: 37.78825,
        longitude: -122.4324,
    });

    const handleSearch = () => {
        // Placeholder for search functionality
        console.log('Searching for:', searchQuery);
        // In a real app, this would geocode the address and update the marker
    };

    const handleMapPress = (e) => {
        const { latitude, longitude } = e.nativeEvent.coordinate;
        setMarker({ latitude, longitude });
        console.log('New marker position:', { latitude, longitude });
    };

    const handleSave = () => {
        console.log('Saving location:', marker);
    };

    return (
        <View style={[styles.container, { backgroundColor: theme.background }]}>

            <View style={[styles.searchContainer, { backgroundColor: theme.inputContainer }]}>
                <TextInput
                    style={[styles.input, {
                        backgroundColor: theme.inputBackground,
                        color: theme.inputText,
                        borderColor: theme.inputBorder,
                    }]}
                    value={searchQuery}
                    onChangeText={setSearchQuery}
                    placeholder="Search location"
                    placeholderTextColor={theme.inputText}
                />
                <TouchableOpacity
                    style={[styles.button, { backgroundColor: theme.buttonBackground }]}
                    onPress={handleSearch}
                >
                    <Text style={[styles.buttonText, { color: theme.buttonText }]}>Search</Text>
                </TouchableOpacity>
            </View>

            <MapView
                style={styles.map}
                onLongPress={handleMapPress}
                initialRegion={{
                    latitude: marker.latitude,
                    longitude: marker.longitude,
                    latitudeDelta: 0.0922,
                    longitudeDelta: 0.0421,
                }}
            >
                <Marker
                    coordinate={marker}
                    title="Selected Location"
                    description="Long press to move marker"
                />
            </MapView>

            <TouchableOpacity
                style={[styles.saveButton, { backgroundColor: theme.buttonBackground }]}
                onPress={handleSave}
            >
                <Text style={[styles.buttonText, { color: theme.buttonText }]}>Save</Text>
            </TouchableOpacity>
        </View>
    );
}

